Large European cities from Munich to Madrid are banning or restricting diesel vehicles due to mounting alarm over toxic emissions, presenting a major challenge to European car makers who sell millions of them.