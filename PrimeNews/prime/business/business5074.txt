Large caps, small caps, tech and energy all joined in a rally that took major stock indices to new highsâ€”a positive sign of even more gains.