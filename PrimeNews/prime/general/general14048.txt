Lawmakers in California's Democratic-controlled senate voted by a slim margin on Monday to extend the state's cap-and-trade program for another decade, sending the bill to their colleagues in the assembly for approval.