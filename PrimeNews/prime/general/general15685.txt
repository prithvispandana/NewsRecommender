France's head of the armed forces resigned on Wednesday after a heated dispute with Emmanuel Macron over defense budget cuts, bringing to a head an early test of the newly elected president's mettle.