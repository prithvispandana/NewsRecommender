The Iraqi prime minister has declared the city of Mosul fully liberated from Islamic State, after the largest urban battle in modern history ended in defeat for the jihadists.