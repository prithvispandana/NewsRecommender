There have been times even Roger Federer has thought of walking away from it all.