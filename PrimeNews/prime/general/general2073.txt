Rally by pro-democracy groups on 20th anniversary of city’s handover to Chinese rule follows Xi Jinping’s visit and labelling of any challenge to it as ‘a red line’