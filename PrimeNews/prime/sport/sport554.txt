Mariano Diaz has signed a five-year deal with Lyon, having struggled for first-team opportunities at Real Madrid.