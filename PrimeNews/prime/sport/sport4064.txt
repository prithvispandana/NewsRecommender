Joe Hart remains surplus to requirements at Manchester City under Pep Guardiola and has agreed a season-long loan at West Ham.